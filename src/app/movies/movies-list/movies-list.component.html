<div class="form-field-wrapper">
  <div class="moviest-logo">
    <img src="../../../assets/moviest-logo.png" alt="Moviest best movies">
  </div>
  <mat-form-field class="form-field">
    <!-- keydown.enter & trigger.closePanel are for hiding options panel when user filled in the input but didn't choose any recor -->
    <!-- on keyup event (showOptions) show options panel - when there is at least one letter in the input -->
    <input autofocus class="search" type="text" placeholder="Find movie" matInput [formControl]="moviesControl" [matAutocomplete]="auto"
      #trigger="matAutocompleteTrigger" (keydown.enter)="$event.target.blur(); trigger.closePanel()" (keyup)="showOptions($event)">
    <mat-autocomplete #auto="matAutocomplete">
      <mat-option *ngFor="let movie of filteredMovies$ | async" [value]="movie.name" (click)="goToDetails(movie)" (onSelectionChange)="goToDetails(movie)"
        [ngClass]="{'hide-autocomplete': !showAutocomplete}">
        {{movie.name}}
      </mat-option>
    </mat-autocomplete>
  </mat-form-field>
</div>
<div class="form-field-chip">
  <mat-chip-list multiple aria-label="Filter selection" *ngFor="let genre of genreFilterStatus">
    <mat-chip (click)="onFilterChange({filterType: genre.genreType, filterActive: !genre.filterActive})" [selected]="genre.filterActive">{{genre.genreType}}</mat-chip>
  </mat-chip-list>
  <mat-chip-list multiple aria-label="Filter selection">
    <mat-chip (click)="onFilterChange({filterType: 'favourite', filterActive: false})" [selected]="selectedFavourites">Favourites</mat-chip>
    <mat-chip (click)="onFilterChange({filterType: 'reset', filterActive: false})" [selected]="true">X Reset Filter</mat-chip>
  </mat-chip-list>
</div>
<mat-grid-list class="form-grid" cols="4">
  <mat-grid-tile *ngFor="let movie of filteredMovies$ | async">
    <app-movie-item (click)="goToDetails(movie)" (keydown.enter)="goToDetails(movie)" [movie]="movie" tabindex="1"></app-movie-item>
  </mat-grid-tile>
</mat-grid-list>
